{
  "id": "looks-tryon-v5-kontext",
  "revision": 5,
  "last_node_id": 70,
  "last_link_id": 70,
  "nodes": [
    {
      "id": 12,
      "type": "UNETLoader",
      "pos": [50, 100],
      "size": [315, 82],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "MODEL", "type": "MODEL", "slot_index": 0, "links": [1]}],
      "properties": {},
      "widgets_values": ["flux2_dev_fp8mixed.safetensors", "default"]
    },
    {
      "id": 38,
      "type": "CLIPLoader",
      "pos": [50, 220],
      "size": [315, 106],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "CLIP", "type": "CLIP", "slot_index": 0, "links": [2]}],
      "properties": {},
      "widgets_values": ["mistral_3_small_flux2_bf16.safetensors", "flux2", "default"]
    },
    {
      "id": 10,
      "type": "VAELoader",
      "pos": [50, 370],
      "size": [315, 58],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "VAE", "type": "VAE", "slot_index": 0, "links": [3, 4, 5]}],
      "properties": {},
      "widgets_values": ["flux2-vae.safetensors"]
    },
    {
      "id": 6,
      "type": "CLIPTextEncode",
      "pos": [400, 100],
      "size": [450, 180],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [{"name": "clip", "type": "CLIP", "link": 2}],
      "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "slot_index": 0, "links": [6]}],
      "properties": {},
      "widgets_values": ["Use the body, pose, face and skin tone from image 1 (the avatar).\nDress this person with the exact clothing from image 2 (the garment).\nKeep the clothing design, cuts, colors, patterns and accessories exactly as shown in image 2.\nDo not redesign or reinterpret the outfit.\nAccurate clothing fit on the body proportions from image 1.\nNeutral studio lighting, pure white background.\nPhotorealistic, 4K quality."],
      "title": "PROMPT (image 1, image 2)"
    },
    {
      "id": 26,
      "type": "FluxGuidance",
      "pos": [400, 310],
      "size": [317, 58],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [{"name": "conditioning", "type": "CONDITIONING", "link": 6}],
      "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "slot_index": 0, "links": [7]}],
      "properties": {},
      "widgets_values": [3.5],
      "title": "Guidance (3.5)"
    },
    {
      "id": 42,
      "type": "LoadImage",
      "pos": [-300, 100],
      "size": [250, 314],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "slot_index": 0, "links": [10]},
        {"name": "MASK", "type": "MASK", "links": null}
      ],
      "properties": {},
      "widgets_values": ["avatar.jpg", "image"],
      "title": "üì∑ IMAGE 1: AVATAR"
    },
    {
      "id": 60,
      "type": "EscalaImagenFluxKontext",
      "pos": [-300, 450],
      "size": [250, 50],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [{"name": "imagen", "type": "IMAGE", "link": 10}],
      "outputs": [{"name": "IMAGEN", "type": "IMAGE", "slot_index": 0, "links": [61]}],
      "properties": {},
      "widgets_values": [],
      "title": "Scale Avatar (Kontext)"
    },
    {
      "id": 40,
      "type": "VAEEncode",
      "pos": [-300, 540],
      "size": [200, 46],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {"name": "pixels", "type": "IMAGE", "link": 61},
        {"name": "vae", "type": "VAE", "link": 3}
      ],
      "outputs": [{"name": "LATENT", "type": "LATENT", "slot_index": 0, "links": [12, 50]}],
      "properties": {},
      "widgets_values": [],
      "title": "Avatar ‚Üí LATENT"
    },
    {
      "id": 50,
      "type": "LoadImage",
      "pos": [-550, 100],
      "size": [220, 314],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "slot_index": 0, "links": [30]},
        {"name": "MASK", "type": "MASK", "links": null}
      ],
      "properties": {},
      "widgets_values": ["garment.jpg", "image"],
      "title": "üëï IMAGE 2: GARMENT"
    },
    {
      "id": 62,
      "type": "EscalaImagenFluxKontext",
      "pos": [-550, 450],
      "size": [220, 50],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [{"name": "imagen", "type": "IMAGE", "link": 30}],
      "outputs": [{"name": "IMAGEN", "type": "IMAGE", "slot_index": 0, "links": [63]}],
      "properties": {},
      "widgets_values": [],
      "title": "Scale Garment (Kontext)"
    },
    {
      "id": 52,
      "type": "VAEEncode",
      "pos": [-550, 540],
      "size": [200, 46],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {"name": "pixels", "type": "IMAGE", "link": 63},
        {"name": "vae", "type": "VAE", "link": 4}
      ],
      "outputs": [{"name": "LATENT", "type": "LATENT", "slot_index": 0, "links": [32]}],
      "properties": {},
      "widgets_values": [],
      "title": "Garment ‚Üí LATENT"
    },
    {
      "id": 39,
      "type": "ReferenceLatent",
      "pos": [400, 400],
      "size": [280, 46],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {"name": "conditioning", "type": "CONDITIONING", "link": 7},
        {"name": "latent", "type": "LATENT", "link": 12}
      ],
      "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "slot_index": 0, "links": [20]}],
      "properties": {},
      "widgets_values": [],
      "title": "Ref 1: AVATAR (image 1)"
    },
    {
      "id": 53,
      "type": "ReferenceLatent",
      "pos": [400, 480],
      "size": [280, 46],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {"name": "conditioning", "type": "CONDITIONING", "link": 20},
        {"name": "latent", "type": "LATENT", "link": 32}
      ],
      "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "slot_index": 0, "links": [64]}],
      "properties": {},
      "widgets_values": [],
      "title": "Ref 2: GARMENT (image 2)"
    },
    {
      "id": 65,
      "type": "M√©todoLatenteReferenciaMultipleFluxKontext",
      "pos": [400, 560],
      "size": [350, 58],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [{"name": "acondicionamiento", "type": "CONDITIONING", "link": 64}],
      "outputs": [{"name": "ACONDICIONAMIENTO", "type": "CONDITIONING", "slot_index": 0, "links": [66]}],
      "properties": {},
      "widgets_values": ["index"],
      "title": "‚ö° Multi-Ref Kontext (index)"
    },
    {
      "id": 22,
      "type": "BasicGuider",
      "pos": [800, 450],
      "size": [222, 46],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 1},
        {"name": "conditioning", "type": "CONDITIONING", "link": 66}
      ],
      "outputs": [{"name": "GUIDER", "type": "GUIDER", "slot_index": 0, "links": [40]}],
      "properties": {},
      "widgets_values": []
    },
    {
      "id": 25,
      "type": "RandomNoise",
      "pos": [800, 100],
      "size": [315, 82],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "NOISE", "type": "NOISE", "slot_index": 0, "links": [41]}],
      "properties": {},
      "widgets_values": [123456789, "randomize"]
    },
    {
      "id": 16,
      "type": "KSamplerSelect",
      "pos": [800, 220],
      "size": [315, 58],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "SAMPLER", "type": "SAMPLER", "slot_index": 0, "links": [42]}],
      "properties": {},
      "widgets_values": ["euler"]
    },
    {
      "id": 48,
      "type": "Flux2Scheduler",
      "pos": [800, 310],
      "size": [270, 82],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [{"name": "SIGMAS", "type": "SIGMAS", "slot_index": 0, "links": [43]}],
      "properties": {},
      "widgets_values": [20, 0.50, 1024, 1536],
      "title": "‚ö° denoise: 0.50, 1024x1536"
    },
    {
      "id": 13,
      "type": "SamplerCustomAdvanced",
      "pos": [1150, 280],
      "size": [272, 124],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {"name": "noise", "type": "NOISE", "link": 41},
        {"name": "guider", "type": "GUIDER", "link": 40},
        {"name": "sampler", "type": "SAMPLER", "link": 42},
        {"name": "sigmas", "type": "SIGMAS", "link": 43},
        {"name": "latent_image", "type": "LATENT", "link": 50}
      ],
      "outputs": [
        {"name": "output", "type": "LATENT", "slot_index": 0, "links": [45]},
        {"name": "denoised_output", "type": "LATENT", "links": null}
      ],
      "properties": {},
      "widgets_values": [],
      "title": "Sampler (AVATAR base)"
    },
    {
      "id": 8,
      "type": "VAEDecode",
      "pos": [1150, 450],
      "size": [210, 46],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {"name": "samples", "type": "LATENT", "link": 45},
        {"name": "vae", "type": "VAE", "link": 5}
      ],
      "outputs": [{"name": "IMAGE", "type": "IMAGE", "slot_index": 0, "links": [46]}],
      "properties": {},
      "widgets_values": []
    },
    {
      "id": 9,
      "type": "SaveImage",
      "pos": [1150, 530],
      "size": [400, 400],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [{"name": "images", "type": "IMAGE", "link": 46}],
      "outputs": [],
      "properties": {},
      "widgets_values": ["tryon_v5"]
    },
    {
      "id": 99,
      "type": "Note",
      "pos": [-600, -120],
      "size": [600, 180],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": ["üéØ LOOKS Try-On v5 - FLUX KONTEXT\n\n‚úÖ NUEVOS NODOS:\n‚Ä¢ EscalaImagenFluxKontext - Escala optimizada para Kontext\n‚Ä¢ M√©todoLatenteReferenciaMultipleFluxKontext (index) - Multi-ref indexado\n\nüìê FLUJO:\n  Image 1 (Avatar) ‚Üí EscalaKontext ‚Üí VAE ‚Üí Ref1\n  Image 2 (Garment) ‚Üí EscalaKontext ‚Üí VAE ‚Üí Ref2\n  Ref1 + Ref2 ‚Üí M√©todoMultipleKontext (index) ‚Üí Guider\n\nüí¨ PROMPT: \"Use X from image 1, Y from image 2\""],
      "color": "#232",
      "bgcolor": "#353"
    }
  ],
  "links": [
    [1, 12, 0, 22, 0, "MODEL"],
    [2, 38, 0, 6, 0, "CLIP"],
    [3, 10, 0, 40, 1, "VAE"],
    [4, 10, 0, 52, 1, "VAE"],
    [5, 10, 0, 8, 1, "VAE"],
    [6, 6, 0, 26, 0, "CONDITIONING"],
    [7, 26, 0, 39, 0, "CONDITIONING"],
    [10, 42, 0, 60, 0, "IMAGE"],
    [12, 40, 0, 39, 1, "LATENT"],
    [20, 39, 0, 53, 0, "CONDITIONING"],
    [30, 50, 0, 62, 0, "IMAGE"],
    [32, 52, 0, 53, 1, "LATENT"],
    [40, 22, 0, 13, 1, "GUIDER"],
    [41, 25, 0, 13, 0, "NOISE"],
    [42, 16, 0, 13, 2, "SAMPLER"],
    [43, 48, 0, 13, 3, "SIGMAS"],
    [45, 13, 0, 8, 0, "LATENT"],
    [46, 8, 0, 9, 0, "IMAGE"],
    [50, 40, 0, 13, 4, "LATENT"],
    [61, 60, 0, 40, 0, "IMAGE"],
    [63, 62, 0, 52, 0, "IMAGE"],
    [64, 53, 0, 65, 0, "CONDITIONING"],
    [66, 65, 0, 22, 1, "CONDITIONING"]
  ],
  "groups": [
    {
      "title": "üì∑ IMAGE 1: AVATAR",
      "bounding": [-320, 60, 280, 550],
      "color": "#3f789e"
    },
    {
      "title": "üëï IMAGE 2: GARMENT",
      "bounding": [-570, 60, 240, 550],
      "color": "#8A5050"
    },
    {
      "title": "Models",
      "bounding": [30, 60, 340, 400],
      "color": "#8A8"
    },
    {
      "title": "References + Kontext Method",
      "bounding": [380, 60, 390, 580],
      "color": "#88A"
    },
    {
      "title": "Sampling",
      "bounding": [780, 60, 340, 450],
      "color": "#A88"
    },
    {
      "title": "Output",
      "bounding": [1130, 240, 440, 710],
      "color": "#8AA"
    }
  ],
  "config": {},
  "extra": {"ds": {"scale": 0.5, "offset": [700, 280]}},
  "version": 0.4
}
